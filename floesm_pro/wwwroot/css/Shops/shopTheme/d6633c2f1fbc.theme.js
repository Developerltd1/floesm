(function($){function now(){return Date.now||new Date().getTime()}
function debounce(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}};return function(){context=this;args=arguments;timestamp=now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}
return result}};var $body=$('body');var curentSlideOriginWidth;var searchOverlayAnimationTime=500;var originImageWidth;var imBusy=!1;var keys={37:1,38:1,39:1,40:1};var fixedFilterOptions;var searchActiveClass='search-active';var lmSizeCount=0;var lmLargeProducts=[];var lmIsSearch=$body.hasClass('search');function changeSizeInit(){var resizeContainer=$('.frame:not(.no-zoom) .base-picture-box');var rightPanel=$('.single .aside');$('.content').addClass("animate");var curentSlide=$('.product-detail .image-gallery .slide.slick-current');curentSlide.addClass("animate");resizeContainer.click(function(){var slider=$('.image-gallery.slick-gallery');var currentSlide=slider.slick('getSlick').currentSlide;if(currentSlide>0){return}
if($(this).hasClass("zoomed")){zoomOut($(this));return}
toggleSlick(!1);curentSlideOriginWidth=curentSlide.width();curentSlide.width(jQuery(window).width());$('.content').width(jQuery(window).width());$(".single .aside").addClass("transform");originImageWidth=$(this).width();var imageWidth=jQuery(window).width()/1.5;if(imageWidth>700){imageWidth=700}
var thisTemp=$(this);if($(this).width()>$(this).height()){$(this).animate({width:$(this).width()+300,},400,function(){})}else{$(this).animate({width:imageWidth,},400,function(){var h=jQuery(window).height();if(h>900){h=900}
thisTemp.css("height",h)})}
$(".price-hexagon").animate({opacity:0,},10,function(){});$(this).parent().css("width","auto");$(this).parent().addClass("close");$(this).css("background-image","url("+$(this).find("img").attr("src")+")")
$(this).css("background-position","20% 50.4889%");$(this).find("img").css("opacity","0");$(this).addClass("zoomed");$(this).mousemove(function(e){$(this).css("background-position","30% "+(MapTest(e.clientY,jQuery(window).height()/7,jQuery(window).height()-10,0,100))+"%")})})}
function zoomOut($item){var curentSlide=$('.product-detail .image-gallery .slide.slick-current');$item.css("background-position","");$item.css("zoom","");$item.animate({width:originImageWidth,},400,function(){$item.css("width","");$item.find("img").css("opacity","1");$item.removeAttr('style');$item.unbind('mousemove')});setTimeout(function(){$(".price-hexagon").animate({opacity:1,},200,function(){})},600);$item.parent().removeClass("close");$item.parent().css("width","");$item.css("height","");$item.removeClass("zoomed");$(".single .aside").removeClass("transform");curentSlide.width(curentSlideOriginWidth);$('.content').width("");toggleSlick(!0)}
function MapTest(value,start1,stop1,start2,stop2){return start2+(stop2-start2)*((value-start1)/(stop1-start1))}
function singleProductChangeQuantity(){if($('body').hasClass('single-product')){var $input=$('.quantity').find('input[name="quantity"]');$('.pagination-list').find('a').on('click',function(e){var quantity=parseInt($(this).text(),10);$(this).parents('.pagination-list').find('.active').removeClass('active');$(this).parent().addClass('active');$input.val(quantity);e.preventDefault()})}}
function initSlick(){if($('body').hasClass('page-template-template-home')){$('.posters-section .slideset').slick({infinite:!0,speed:300,slidesToShow:1,centerMode:!0,variableWidth:!0})}
$('.banner-gallery').slick({autoplay:!0,autoplaySpeed:5000,dots:!0,infinite:!0,slidesToShow:1,speed:300});if($('.image-gallery.slick-gallery .slide').eq(1).find('.frame').hasClass('arrow-dark')){$('main').removeClass('white').addClass('black')}
$('.image-gallery.slick-gallery').on('beforeChange',function(event,slick,currentSlide,nextSlide){if($('.image-gallery.slick-gallery .slide').eq(currentSlide).find('.frame').hasClass('arrow-dark')){setTimeout(function(){$('main').removeClass('white').addClass('black')},slick.options.speed/2)}else{setTimeout(function(){$('main').removeClass('black').addClass('white')},slick.options.speed/2)}})}
function miniCartNotice(){if($('.indo-drop').hasClass('mini-cart-showed')){setTimeout(function(){$('.indo-drop').fadeOut(400)},2000)}}
function infinityScroll(){if(imBusy){return!1}
var button=document.getElementById('pc-loadMore');if(button){var scrollTop=(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;var offset=button.offsetTop;var threshold=parseInt(offset*0.3,10);if(scrollTop>=offset-threshold){button.click()}}}
function addInfinityScrollListener(){window.removeEventListener('scroll',infinityScroll);window.addEventListener('scroll',infinityScroll)}
function setInitialSizeVariables(){lmSizeCount=0;lmLargeProducts=[];$('.products > .product-box').each(function(index,product){var size=getProductSize($(product));if(size=='large'){lmSizeCount=lmSizeCount+2}else{lmSizeCount=lmSizeCount+1}
if(lmSizeCount>=4){lmSizeCount=0}})}
function getProductSize($product){var size='small';if($product.hasClass('landscape')||$product.hasClass('col-6')){size='large'}
return size}
function addProductsBySize($newProducts){$newProducts.each(function(index,product){if(lmLargeProducts.length&&lmSizeCount!=3){var lmLargeProductsCount=0;$.each(lmLargeProducts,function(index,largeProduct){$('.products').append(largeProduct);lmSizeCount=lmSizeCount+2;if(lmSizeCount==3){return!1}
if(lmSizeCount>=4){lmSizeCount=0}
lmLargeProductsCount++});lmLargeProducts.splice(0,lmLargeProductsCount)}
var productSize=getProductSize($(product));if(lmSizeCount==3&&productSize=='large'){lmLargeProducts.push(product)}else{$('.products').append(product);if(productSize=='large'){lmSizeCount=lmSizeCount+2}else{lmSizeCount=lmSizeCount+1}
if(lmSizeCount>=4){lmSizeCount=0}}})}
function addAnyRemainingLargeProducts(){$.each(lmLargeProducts,function(index,largeProduct){$('.products').append(largeProduct)})}
function hideFooter(){$body.addClass('footer-none');$('.showNoPagination').hide()}
function showFooter(){$body.removeClass('footer-none');$('.showNoPagination').show();sameHeightInit()}
function initLoadMore(){if($body.hasClass('archive')&&$body.hasClass('woocommerce-page')||lmIsSearch){setupLoadMore()}}
function setupLoadMore(){var $pagination=$('.woocommerce-pagination, .posts-navigation');var $button=$('<button id="pc-loadMore" class="button js-hide"><span>'+PCTheme.more.load+'</span></button>');if($pagination.length){hideFooter();$pagination.hide();$pagination.after($button);addInfinityScrollListener();setInitialSizeVariables();$button.on('click',function(){imBusy=!0;var nextPage=lmIsSearch?$pagination.find('.nav-previous a').attr('href'):$pagination.find('.next').attr('href');var nextHolder=$('<div id="nextHolder" style="display:none;"></div>');$button.prop('disabled',!0);$button.text(PCTheme.more.processing);var counter=0;var intervalID=setInterval(function(){if(counter==3){$button.text(PCTheme.more.processing);counter=0}else{$button.text($button.text()+'.');counter++}},400);$('.products').append(nextHolder);nextPage=removeAdminAjax(nextPage);nextHolder.load(nextPage+' .products',function(response,status,xhr){var nextUrl=lmIsSearch?$(response).find('.nav-previous a'):$(response).find('.next.page-numbers');clearInterval(intervalID);nextHolder.find('.products').children().addClass('hot').hide();addProductsBySize(nextHolder.find('.products .product-box'));$('.products').find('.hot').removeClass('hot').fadeIn(400);nextHolder.remove();if(nextUrl.length){var nextHref=removeAdminAjax(nextUrl.attr('href'));$button.text('');$button.append('<span>'+PCTheme.more.load+'</span>');$button.prop('disabled',!1);if(lmIsSearch){$pagination.find('.nav-previous a').attr('href',nextHref)}else{$pagination.find('.next').attr('href',nextHref)}
imBusy=!1}else{addAnyRemainingLargeProducts();showFooter();$button.hide();$button.prop('disabled',!0);$button.text(PCTheme.more.end);window.removeEventListener('scroll',infinityScroll)}})})}else{showFooter()}}
function removeAdminAjax(url){if(url.indexOf('admin-ajax')>-1){var page=getQueryStringParameterByName('paged',url);return updateQueryStringParameterByName('paged',page)}else{return url}}
function sameHeightInit(){$('.footer-info-section').sameHeight({elements:'.column',flexible:!0,multiLine:!0})}
function newsLetterOverlay(){var modal=$('#pc_news_letter');if($('body').hasClass('isNewUser')){if(PCTheme.modalTimer!=0){setTimeout(function(){modal.fadeIn(400)},PCTheme.modalTimer)}}
$('#pc_news_letter_close, #pc_news_letter_overlay').on('click',function(e){closeModal()});$(document).keyup(function(e){if(e.keyCode==27){closeModal()}});if(PCTheme.modalSelector){$(PCTheme.modalSelector).on('click',function(e){e.preventDefault();modal.fadeIn(400)})}
function closeModal(){modal.hide();var oneMonth=(60*60*24)*31;setCookie('isNewUser','1',{expires:oneMonth})}}
function setCookie(name,value,options){options=options||{};var expires=options.expires;if(typeof expires=="number"&&expires){var d=new Date();d.setTime(d.getTime()+expires*1000);expires=options.expires=d}
if(expires&&expires.toUTCString){options.expires=expires.toUTCString()}
value=encodeURIComponent(value);var updatedCookie=name+"="+value;for(var propName in options){updatedCookie+="; "+propName;var propValue=options[propName];if(propValue!==!0){updatedCookie+="="+propValue}}
document.cookie=updatedCookie}
function searchOverlayInit(){$('.search-popup-button').click(function(e){e.preventDefault();if($('body').hasClass(searchActiveClass)){closeSearchOverlay()}else{if($('body').hasClass('added-to-cart')){$('.site-overlay').click()}
openSearchOverlay()}
return!1});$('.close-search-popup-button').click(function(e){e.preventDefault();closeSearchOverlay()});$('.site-overlay').click(function(e){if($('body').hasClass('search-active')){e.preventDefault();closeSearchOverlay()}});$(document).keyup(function(e){if(e.keyCode==27&&$('body').hasClass('search-active')){closeSearchOverlay()}})}
function openSearchOverlay(){$('body').addClass(searchActiveClass);setTimeout(function(){$('#search-overlay .search-form-input')[0].focus()},750);disableScroll()}
function closeSearchOverlay(){$('body').removeClass(searchActiveClass);enableScroll()}
function preventDefault(e){e=e||window.event;if(e.preventDefault)
e.preventDefault();e.returnValue=!1}
function preventDefaultForScrollKeys(e){if(keys[e.keyCode]){preventDefault(e);return!1}}
function disableScroll(){if(window.addEventListener)
window.addEventListener('DOMMouseScroll',preventDefault,!1);window.onwheel=preventDefault;window.onmousewheel=document.onmousewheel=preventDefault;window.ontouchmove=preventDefault;document.onkeydown=preventDefaultForScrollKeys}
function enableScroll(){if(window.removeEventListener)
window.removeEventListener('DOMMouseScroll',preventDefault,!1);window.onmousewheel=document.onmousewheel=null;window.onwheel=null;window.ontouchmove=null;document.onkeydown=null}
function toggleSlick(toggle){var slider=$('.image-gallery.slick-gallery');slider.slick('slickSetOption','accessibility',toggle);slider.slick('slickSetOption','draggable',toggle);slider.slick('slickSetOption','swipe',toggle);slider.slick('slickSetOption','touchMove',toggle);if(toggle){slider.removeClass('slick-disabled')}else{slider.addClass('slick-disabled')}}
function initProductVariations(){if($('body').hasClass('single-product')){var $form=$('.cart'),$slider=$('.image-gallery.slick-gallery');if($form){var $images=$('.image-gallery .frame:not(.no-zoom) .base-picture-box img');$.each($images,function(index,image){$(image).attr('data-default-image',$(image).attr('src'))});$form.on('show_variation',function(e,variation){$.each($images,function(index,image){currentImageSrc=$(image).attr('src');if(currentImageSrc!=variation.image.full_src){$(image).attr('src',variation.image.full_src);$slider.slick('slickGoTo',0,!1)}});updateCartNotification(variation)});$form.on('reset_image',function(e){$.each($images,function(index,image){$(image).attr('src',$(image).attr('data-default-image'))});updateCartNotification()})}}}
function updateCartNotification(variation){var $form=$('.cart'),$product=$('.slide[data-slick-index="0"]'),backgroundColor=$product.children('div').css('backgroundColor'),$cartNotification=$('#cart-notification');if(backgroundColor&&backgroundColor!='rgba(0, 0, 0, 0)'){$cartNotification.find('.cart-notification-frame').css('backgroundColor',backgroundColor)}
if($product.find('.frame').hasClass('landscape')){$cartNotification.find('.cart-notification-frame').addClass('landscape')}
$cartNotification.find('.cart-notification-image').attr('src',$product.find('.frame .base-picture-box img').attr('src'));$cartNotification.find('.cart-notification-title').text($('.product_title').text());if(variation){var attributes='';$.each(variation.attributes,function(key,attribute){attributes+='<span class="cart-notification-attribute">'+$form.find('.variations select[name='+key+'] option[value='+attribute+']').text()+'</span>'});$cartNotification.find('.cart-notification-attributes').html(attributes);$cartNotification.find('.cart-notification-price').html(variation.price_html)}else{$cartNotification.find('.cart-notification-attributes').html('');$cartNotification.find('.cart-notification-price').html($('.price-box .price').html())}}
function initAjaxAddToCart(){var addedToCartClass='added-to-cart',addingToCartClass='adding-to-cart';if($body.hasClass('single-product')){$('form.cart').on('submit',function(e){e.preventDefault();var $form=$(this),$cartLink=$('.opener-basket');$body.addClass('adding-to-cart');$.post($cartLink.attr('href'),$form.serialize()).done(function(data){var count=$(data).find('.opener-basket .number').text();$cartLink.find('.number').text(count);$body.removeClass(addingToCartClass);$body.addClass(addedToCartClass)}).fail(function(xhr,status,error){alert('There was an error adding this product to your cart.');$body.removeClass(addingToCartClass)})});$body.on('click','.site-overlay',function(){if($body.hasClass(addedToCartClass)){$body.removeClass(addedToCartClass)}});$(document).keyup(function(e){if(e.keyCode==27&&$body.hasClass(addedToCartClass)){$body.removeClass(addedToCartClass)}})}}
function getQueryStringParameterByName(name,url){if(!url)url=window.location.href;name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return'';return decodeURIComponent(results[2].replace(/\+/g," "))}
function updateQueryStringParameterByName(name,value,url){if(!url)url=window.location.href;var re=new RegExp("([?&])"+name+"=.*?(&|#|$)(.*)","gi"),hash;if(re.test(url)){if(typeof value!=='undefined'&&value!==null)
return url.replace(re,'$1'+name+"="+value+'$2$3');else{hash=url.split('#');url=hash[0].replace(re,'$1$3').replace(/(&|\?)$/,'');if(typeof hash[1]!=='undefined'&&hash[1]!==null)
url+='#'+hash[1];return url}}else{if(typeof value!=='undefined'&&value!==null){var separator=url.indexOf('?')!==-1?'&':'?';hash=url.split('#');url=hash[0]+separator+name+'='+value;if(typeof hash[1]!=='undefined'&&hash[1]!==null)
url+='#'+hash[1];return url}else return url}}
function initFilter(){addResetButtonToFilter();makeFilterVisible();fixedFilterInit();handleFilterInputChange();handleResetFilterClick();initFilterMobileTriggerClick();initFilterCategoryClick();initFilterDropdowns();updateFilterCount();$(document).on('woof_ajax_done',function(){$('body').removeClass('ajaxing');addResetButtonToFilter();handleFilterInputChange();initFilterCategoryClick();initFilterDropdowns();updateFilterCount();setupLoadMore();filterUpdatedScroll()})}
function makeFilterVisible(){$('#product-filter').addClass('visible')}
function fixedFilterInit(){var $filter=$('#product-filter');if($filter.length>0&&!$('body').hasClass('wp-admin')){getFixedFilterOptions();checkAndFixFilter();var lazyGetFixedFilterOptions=debounce(getFixedFilterOptions,500);window.addEventListener('resize',lazyGetFixedFilterOptions);window.addEventListener('scroll',checkAndFixFilter)}}
function getFixedFilterOptions(){var $menu=$('#menu'),$main=$('#main'),$filter=$('#product-filter'),$adminBar=$('#wpadminbar');var mainOffset=$main.offset(),fixedPosition=mainOffset.top-$menu.outerHeight()-$adminBar.outerHeight(),fixedClass='product-filter-fixed';if(!$body.hasClass(fixedClass)){fixedPosition=fixedPosition-$filter.outerHeight()}
fixedFilterOptions={fixedPosition:fixedPosition,fixedClass:'product-filter-fixed'}}
function checkAndFixFilter(){if($('#pc_news_letter').css('display')=='none'){if(window.pageYOffset>=fixedFilterOptions.fixedPosition&&window.pageYOffset>0){if(!$body.hasClass(fixedFilterOptions.fixedClass)){$body.addClass(fixedFilterOptions.fixedClass)}}else{if($body.hasClass(fixedFilterOptions.fixedClass)){$body.removeClass(fixedFilterOptions.fixedClass)}}}}
function handleFilterInputChange(){$('#product-filter input, #product-filter select').on('change',function(){if(!$('body').hasClass('filter-visible')){setTimeout(function(){$('body').addClass('ajaxing');$('#product-filter .woof_submit_search_form').click()},1)}})}
function handleResetFilterClick(){$('#product-filter').on('click','.product-filter-reset-button',function(e){e.preventDefault();$('#product-filter .woof_reset_search_form').click()})}
function addResetButtonToFilter(){if($('#product-filter .woof_redraw_zone .product-filter-reset').length==0){$('#product-filter .product-filter-reset').clone().appendTo('#product-filter .woof_redraw_zone')}}
function initFilterMobileTriggerClick(){$('#product-filter .product-filter-mobile-trigger').on('click',function(e){e.preventDefault();$('body').toggleClass('filter-visible')});$('#menu .close-filter-popup-button').on('click',function(e){e.preventDefault();$('body').removeClass('filter-visible')});$('#menu .apply-filter-popup-button').on('click',function(e){e.preventDefault();$('#product-filter .woof_submit_search_form').click();$('body').removeClass('filter-visible')})}
function initFilterCategoryClick(){$('#product-filter .woof_container_inner h4').on('click',function(){$(this).parent().toggleClass('woof_container_open')})}
function initFilterDropdowns(){setFilterDropdownClasses();var lazySetFilterDropdownClasses=debounce(setFilterDropdownClasses,500);window.addEventListener('resize',lazySetFilterDropdownClasses)}
function updateFilterCount(){var $resetButton=$('#product-filter .product-filter-reset .button'),resetActive=!1;$('#product-filter .woof_container').each(function(){var $container=$(this),$title=$container.find('.woof_container_inner h4'),count=$container.find('.woof_block_html_items input[checked="checked"], .woof_block_html_items option[selected="selected"]:not([value="0"])').length,titleText=$title.html();if(count>0){resetActive=!0;$title.html(titleText+' <span class="filter-count">('+count+')</span>')}});if(resetActive){$resetButton.removeClass('inactive')}else{$resetButton.addClass('inactive')}}
function filterUpdatedScroll(){var offsetMain=$('#main').offset(),menuHeight=$('#menu').outerHeight(),scrollDestination=offsetMain.top-menuHeight-1;if($('#wpadminbar')){scrollDestination=scrollDestination-$('#wpadminbar').outerHeight()}
var $bodyElement=$('html, body');if(scrollDestination<$bodyElement.scrollTop()){$bodyElement.animate({scrollTop:scrollDestination})}}
function setFilterDropdownClasses(){$('#product-filter .woof_container').each(function(){var $container=$(this),containerOffset=$container.offset(),containerWidth=$container.outerWidth(),dropdownWidth=$container.find('.woof_block_html_items').outerWidth();if((containerOffset.left+(containerWidth/2))-(dropdownWidth/2)<0){$container.addClass('woof_container_fix_left')}else{$container.removeClass('woof_container_fix_left')}
if((containerOffset.left+(containerWidth/2))+(dropdownWidth/2)>$('body').outerWidth()){$container.addClass('woof_container_fix_right')}else{$container.removeClass('woof_container_fix_right')}})}
function initCustomSelect(){$('.cart select, .checkout select').each(function(){$(this).wrap('<div class="custom-select"></div>')})}
$(document).ready(function(){singleProductChangeQuantity();initSlick();miniCartNotice();initLoadMore();newsLetterOverlay();changeSizeInit();searchOverlayInit();updateCartNotification();initProductVariations();initAjaxAddToCart();initFilter();initCustomSelect()})})(jQuery)